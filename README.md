<a id="return"></a>

<center>

# Промежуточная аттестация

## Урок 2. Магазин игрушек (Java)

</center>

---

**Необходимо написать программу – розыгрыша игрушек в магазине детских товаров.**

**Стараемся применять ООП и работу с файлами.**

*Если какой-то пункт не изучали и не знаете, как сделать, то можете сделать своим способом. Например, у кого в курсе не было ООП, то применяем списки\массивы\словари.*

**Желательный функционал программы:**

>- В программе должен быть минимум один класс со следующими свойствами:
>>- id игрушки;
>>- текстовое название;
>>- количество;
>>- частота выпадения игрушки (вес в % до 100)
>- Метод добавление новых игрушек и возможность изменения веса (частоты выпадения игрушки)
>- Возможность организовать розыгрыш игрушек

*Например, следующим образом:*

С помощью метода выбора призовой игрушки – мы получаем эту призовую игрушку и записываем в список\массив.
Это список призовых игрушек, которые ожидают выдачи.
Еще у нас должен быть метод – получения призовой игрушки.
После его вызова – мы удаляем из списка\массива первую игрушку и сдвигаем массив. А эту игрушку записываем в текстовый файл.

Не забываем уменьшить количество игрушек.

К написанию программы можно подойти более творчески и делать так, как Вы поняли задание. Немного менять и отходить от примера выше.

---

<a id="Table_of_contents"></a>
### Оглавление

- [Главное меню приложения для розыгрыша игрушек в магазине детских товаров](#Main "Главное меню приложения для розыгрыша игрушек в магазине детских товаров")
- [Отобразите весь список игрушек](#Список_всех_игрушек "Отобразите весь список игрушек")
- [Отобразить список разыгранных игрушек](#Список_разыгранных_игрушек "Отобразить список разыгранных игрушек")
- [Добавьте новую игрушку в список](#Add_toys "Добавьте новую игрушку в список")
- [Удалить игрушку из списка](#Remove_toys "Удалить игрушку из списка")
- [Изменить данные игрушки](#Editing "Изменить данные игрушки")
- [Начать игру](#Game "Начать игру")

---

<a id="Main"></a>

### **Главное меню приложения для розыгрыша игрушек в магазине детских товаров:**

Файл Main.java:

Выводит пользователю меню и выполняет различные действия, которые пользователь выбирает.

scanner - позволяет считывать входные данные от пользователя через интерфейс командной строки..

menuItems - переменная пунктов меню, представляет собой список типа String, который хранит список пунктов меню в виде строк. 

Меню отображается пользователю с помощью цикла, который перебирает список пунктов меню и выводит каждый пункт с соответствующим номером. Пользователю предлагается ввести номер, программа выполняет действие, которое выбрал пользователь, используя switch. Проверяется правильность ввода, чтобы это было число. Цикл выбора будет продолжаться до тех пор, пока пользователь не выберет "Выход".

Если пользователь выбирает "Отобразите весь список игрушек", вызывается метод displayToyList из класса OutputTablesToys.

Если пользователь выбирает "Отобразить список разыгранных игрушек", вызывается метод displayParticipatingToys из класса OutputTablesToys.

Если пользователь выбирает "Добавьте новую игрушку в список", вызывается метод addNewToy из класса AddToys.

Если пользователь выбирает "Удалить игрушку из списка", вызывается метод displayToyList из класса OutputTablesToys для вывода списка игрушек, после чего вызывается метод removeToyById из класса RemoveToy.

Если пользователь выбирает "Изменить данные игрушки", вызывается метод modifyToyById из класса ToyModifier, так же обрабатывается исключение "Произошла ошибка при изменении данных: ".

Если пользователь выбирает "Начать игру" (Начать игру), вызывается метод start из класса Game.

***В консоли это выглядит следующим образом:***

#### **Главное меню приложения:**

<img src="images\Main(1).jpg" height="228" width="363"/>

#### **Выход:**

<img src="images\Main(2).jpg" height="145" width="385"/>

#### **Ошибки при вводе числа:**

<img src="images\Main(3).jpg" height="364" width="505"/>

:point_right: [Оглавление](#Table_of_contents "Оглавление")

---

<a id="Список_всех_игрушек"></a>

<a id="Список_разыгранных_игрушек"></a>

### **Пункт меню отобразите весь список игрушек**

### **Пункт меню отобразить список разыгранных игрушек**

OutputTablesToys.java - используюется для чтения и отображения данных, которые хранятся в файлах toys.csv и played.csv.

Константы TOY_LIST и PARTICIPATING_TOYS хранят имена CSV-файлов, которые содержат данные игрушек.

Метод displayToyList() считывает файл "toys.csv", разбивает каждую строку по зяпятым, далее выводит данные игрушки в форматированном виде.

Метод displayParticipatingToys() считывает файл "played.csv", разбивает каждую строку по запятым, далее выводит данные игрушки в форматированном виде.

***В консоли это выглядит следующим образом:***

#### **Отобразите весь список игрушек:**

<img src="images\list_of_all_toys.jpg" height="258" width="420"/>

#### **Отобразить список разыгранных игрушек:**

<img src="images\list_of_dropped_toys.jpg" height="193" width="425"/>

:point_right: [Оглавление](#Table_of_contents "Оглавление")

---

<a id="Add_toys"></a>

### **Пункт меню добавления новой игрушки в список**

AddToys.java - добавление новых игрушек в файл "toys.csv" с проверкой корректности введенных данных и учетом общего процента выпадения игрушек.

addNewToy() считывает содержимое файла toys.csv, находит последнее ID игрушки и общий процент выпадения всех игрушек. Просит пользователя ввести ID, после чего заполнить поля новой игрушки, включая название, количество и процент выпадения. Так же делается проверка на правильность ввода, после чего, если ввод правильный, то новая игрушка записываеся в файл toys.csv. Если ввод не правильный, то выводятся соответствующие сообщения.

Если общий процент выпадения всех игрушек превышает 100%, метод выводит сообщение об ошибке и прекращает выполнение добавления новой игрушки в файл.


***В консоли это выглядит следующим образом:***

#### **Добавление новой игрушки в файл:**

<img src="images\add_toys(1).jpg" height="640" width="539"/>

#### **Ошибки при вводе числа:**

<img src="images\add_toys(2).jpg" height="475" width="534"/>

:point_right: [Оглавление](#Table_of_contents "Оглавление")

---

<a id="Remove_toys"></a>

### **Пункт меню удаления игрушки из списка**

RemoveToy.java - реализует удаление записи об игрушке из файла toys.csv по ID игрушки.

Считывается файл toys.csv и его записи в список records. Пользователь вводит ID игрушки, которую нужно удалить, осуществляется проверка на корректность ввода. Если ввод корректен, то осуществляется проход по списку records и поиск записи с указанным ID. Если запись найдена, то она удаляется из списка records. Далее происходит обновление списка updatedRecords, присваивание новых ID, чтобы все ID были по порядку и запись обновленных данных в тот файл toys.csv. Если запись не была найдена, выводится сообщение об ошибке.

***В консоли это выглядит следующим образом:***

#### **Удаление игрушки из файла:**

<img src="images\remove_toy(1).jpg" height="637" width="425"/>

#### **Ошибки при вводе числа:**

<img src="images\remove_toy(2).jpg" height="450" width="381"/>

:point_right: [Оглавление](#Table_of_contents "Оглавление")

---

<a id="Editing"></a>

### **Пункт меню изменения данных игрушки**

ToyModifier.java - реализует изменение записи об игрушке в файле toys.csv.

modifyToyById() просит пользователя ввести ID игрушки, которую нужно изменить. Далее считывается файл toys.csv и его записи, и вычисляется общий процент выпадения игрушек. Если общий процент превышает 100%, то выводится соответствующее сообщение, что сумма процентов не должна превышать 100%. Если игрушка с заданным ID находится в файле, программа просит пользователя ввести новые значения для названия игрушки, количества и процента выпадения. Если пользователь оставляет какие-то поля пустыми, тогда используются старые значения.

Если пользователь вводит некорректные данные, программа выводит соответствующие сообщения об ошибке. Если все данные корректны, формируется новая строка данных для игрушки и заменяет старую строку в файле на новую. Если игрушка с заданным ID не была найдена в файле, программа сообщает пользователю, что игрушка не найлена.

***В консоли это выглядит следующим образом:***

#### **Изменение игрушки в файле:**

<img src="images\Toy_modifier(1).jpg" height="882" width="565"/>

#### **Возможные ошибки:**

<img src="images\Toy_modifier(2).jpg" height="1377" width="531"/>

:point_right: [Оглавление](#Table_of_contents "Оглавление")

---

<a id="Game"></a>

### **Пункт меню начала игры**

Game.java - игра, где выбирается случайная игрушка из файла toys.csv с определенной вероятностью и выводится на экран. Также у выпавшей игрушки уменьшается количесво на 1 в файле toys.csv. Записывается в файл played.csv, который хранит все игрушки, которые были выбраны ранее. Если в файле played.csv выпавшая игрушка есть, то к количеству прибавляется 1. Если в файле toys.csv игрушек нет, то пльзователю выводится соответствующее сообщение, что игрушек в файле нет. Так же идет проверка файлов, если файл toys.csv и/или played.csv отсутсвует(ют), то выводится соответствующее сообщение, что ошибка чтения файла.

Класс также содержит две константы: TOY_LIST, содержащую имя файла, из которого читается список игрушек (toys.csv), и PARTICIPATING_TOYS, содержащую имя файла, в который записываются выбранные игрушки (played.csv).

start(): запускает игру, выбирая случайную игрушку из файла toys.csv и выводит ее название на экран, выводит сообщение, что выбранная игрушка добавлена в файл played.csv;

readToysFromFile(): читает список игрушек из файла toys.csv и возвращает его в виде списка строк;

selectRandomToy(): выбирает случайную игрушку из списка игрушек, учитывая вероятности каждой игрушки;

writePlayedToyToFile(): записывает выбранную игрушку в файл played.csv, уменьшает ее количество на 1, если оно больше 0, если количество становится равным 0, то удаляет игрушку из файла toys.csv.

***В консоли это выглядит следующим образом:***

#### **Игра:**

<img src="images\Game(1).jpg" height="1294" width="674"/>

#### **Возможные ошибки:**

<img src="images\Game(2).jpg" height="532" width="669"/>

:point_right: [Оглавление](#Table_of_contents "Оглавление")

---
